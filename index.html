<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TikTok Tech Â· Portfolio</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600&family=Orbitron:wght@500;600&display=swap"
    rel="stylesheet"
  />
  <link rel="stylesheet" href="tiktok.css" />
</head>
<body>
  <div class="noise"></div>
  <div class="grid-overlay" aria-hidden="true"></div>
  <div id="app">
    <header class="tk-hero">
      <nav class="tk-nav">
        <div class="nav-links">
          <a v-for="link in navLinks" :key="link.key" :href="link.href">{{ t(link.key) }}</a>
        </div>
        <div
          class="language-switcher"
          :data-open="languageMenuOpen ? 'true' : 'false'"
          ref="languageSwitcher"
        >
          <button
            class="language-toggle"
            type="button"
            aria-haspopup="listbox"
            :aria-expanded="languageMenuOpen ? 'true' : 'false'"
            @click.stop="toggleLanguageMenu"
          >
            <span class="language-label">{{ languageLabel }}</span>
            <span class="chevron" aria-hidden="true"></span>
          </button>
          <ul class="language-menu" role="listbox">
            <li v-for="lang in languages" :key="lang">
              <button
                class="language-option"
                type="button"
                :data-value="lang"
                :aria-selected="lang === currentLanguage ? 'true' : 'false'"
                @click.stop="setLanguage(lang)"
              >
                {{ t('lang.option.' + lang) }}
              </button>
            </li>
          </ul>
        </div>
      </nav>
      <div class="tk-hero__layout">
        <div class="hero-media">
          <div class="photo-frame">
            <img class="portrait-photo" src="self portrait.png" alt="Self portrait of Xinrou" />
            <div class="photo-glow"></div>
          </div>
        </div>
        <div class="tk-hero__content">
          <div class="hero-title-block">
            <h1 class="typing-title">
              <span class="typing-line" v-for="line in heroLines" :key="line.key">
                <span class="typing-text" :class="{ 'typing-complete': line.complete }">{{ line.typed }}</span>
                <span class="typing-caret" aria-hidden="true" :class="{ paused: line.complete }"></span>
              </span>
            </h1>
            <p class="lead">{{ t('hero.lead') }}</p>
            <div class="cta-group">
              <a
                class="btn icon linkedin"
                href="https://www.linkedin.com/in/xinrou-dong-a7ba92171/"
                target="_blank"
                rel="noreferrer"
                aria-label="LinkedIn profile"
              >
                <svg viewBox="0 0 24 24" role="presentation" focusable="false">
                  <path
                    d="M4.98 3.5C4.98 4.61 4.1 5.5 2.99 5.5 1.88 5.5 1 4.61 1 3.5 1 2.39 1.88 1.5 2.99 1.5 4.1 1.5 4.98 2.39 4.98 3.5zM1.2 22h3.58V7.98H1.2V22zM8.35 7.98H11.8v1.91h.05c.48-.91 1.66-1.87 3.42-1.87 3.66 0 4.34 2.25 4.34 5.17V22h-3.58v-6.32c0-1.51-.03-3.45-2.1-3.45-2.1 0-2.42 1.64-2.42 3.34V22H8.35V7.98z"
                  />
                </svg>
              </a>
              <a
                class="btn icon github"
                href="https://github.com/Shomao1998"
                target="_blank"
                rel="noreferrer"
                aria-label="GitHub profile"
              >
                <svg viewBox="0 0 24 24" role="presentation" focusable="false">
                  <path
                    d="M12 .5C5.73.5.7 5.53.7 11.8c0 5 3.22 9.23 7.7 10.73.56.1.77-.24.77-.53 0-.26-.01-1.13-.02-2.05-3.13.68-3.79-1.35-3.79-1.35-.51-1.29-1.25-1.64-1.25-1.64-1.02-.7.08-.68.08-.68 1.13.08 1.73 1.16 1.73 1.16 1 .1 2.11-.79 2.11-.79.2-.77.52-1.3.94-1.6-2.5-.29-5.12-1.26-5.12-5.61 0-1.24.44-2.24 1.15-3.03-.12-.29-.5-1.46.11-3.05 0 0 .94-.3 3.09 1.15a10.57 10.57 0 0 1 5.63 0c2.15-1.46 3.08-1.15 3.08-1.15.62 1.59.24 2.76.12 3.05.72.79 1.15 1.79 1.15 3.03 0 4.36-2.62 5.31-5.12 5.61.54.39 1.02 1.16 1.02 2.35 0 1.7-.02 3.07-.02 3.48 0 .29.2.64.78.53 4.47-1.5 7.69-5.74 7.69-10.74C23.3 5.53 18.27.5 12 .5z"
                  />
                </svg>
              </a>
              <a
                class="btn icon cv"
                href="xinrou_resume.pdf"
                target="_blank"
                rel="noreferrer"
                aria-label="View CV PDF"
              >
                <span class="cv-label" aria-hidden="true">cv</span>
              </a>
              <a class="btn primary" href="#contact">
                {{ t('hero.contact') }}
              </a>
            </div>
          </div>
        </div>
      </div>
    </header>

    <main>
      <section id="about-chat" class="panel about-chat">
        <div class="about-chat__layout">
          <div class="about-card">
            <h2>{{ t('split.offer.title') }}</h2>
            <div class="about-grid">
              <article class="about-pill" v-for="offerKey in offerings" :key="offerKey">
                <p>{{ t(offerKey) }}</p>
              </article>
            </div>
          </div>
            <div class="chat-shell">
              <div class="panel__header">
                <h2>{{ t('chatbot.title') }}</h2>
                <p class="lead">{{ t('chatbot.lead') }}</p>
              </div>
                <div class="chat-dialog">
              <div class="chat-dialog__meta">
                <div class="quick-questions inline">
                  <button
                    v-for="questionKey in quickQuestionKeys"
                    :key="questionKey"
                        type="button"
                        class="quick-question quick-question--small"
                        @click="askQuickQuestion(questionKey)"
                      >
                        {{ t(questionKey) }}
                      </button>
                  </div>
                </div>
              <div class="chat-carousel" ref="chatCarousel">
                <div v-if="!chatMessages.length" class="chat-empty">
                  <p>{{ t('chatbot.welcome') }}</p>
                  <p class="chat-empty__hint">{{ t('chatbot.scrollHint') }}</p>
                </div>
                <div
                  v-for="(message, index) in chatMessages"
                  :key="index"
                  class="chat-turn"
                >
                  <div class="chat-bubble" :data-role="message.role">
                    <div class="chat-message__meta">
                      {{ message.role === 'user' ? t('chatbot.label.user') : t('chatbot.label.assistant') }}
                    </div>
                    <p>{{ message.content }}</p>
                  </div>
                </div>
                <div v-if="isChatLoading" class="chat-turn">
                  <div class="chat-bubble" data-role="assistant">
                    <div class="chat-message__meta">{{ t('chatbot.label.assistant') }}</div>
                    <p class="chat-loading">...</p>
                  </div>
                </div>
              </div>
              <div v-if="chatMessages.length > 1" class="chat-scroll-hint">
                <span class="scroll-dot" aria-hidden="true"></span>
                {{ t('chatbot.scrollHint') }}
              </div>
              <form class="chat-input" @submit.prevent="sendMessage">
                <input
                  class="text-input"
                  v-model="chatInput"
                  :aria-label="t('chatbot.input.placeholder')"
                  autocomplete="off"
                />
                <button class="btn primary" type="submit" :disabled="isChatLoading">
                  {{ isChatLoading ? '...' : t('chatbot.send') }}
                </button>
              </form>
            </div>
          </div>
        </div>
      </section>

      <section id="labs" class="panel">
        <div class="panel__header">
          <h2>{{ t('labs.title') }}</h2>
        </div>
        <div class="cards">
          <article
            class="glow-card"
            v-for="card in labsCards"
            :key="card.key"
            @pointermove="handlePointer"
          >
            <div class="tag">{{ t(card.tagKey) }}</div>
            <h3>{{ t(card.titleKey) }}</h3>
            <p>{{ t(card.descKey) }}</p>
            <span>{{ t(card.metaKey) }}</span>
          </article>
        </div>
      </section>

      <section id="timeline" class="panel timeline">
        <div class="panel__header">
          <h2>{{ t('timeline.title') }}</h2>
        </div>
        <ol>
          <li v-for="item in timelineEntries" :key="item.titleKey">
            <div class="dot"></div>
            <div>
              <h3>{{ t(item.titleKey) }}</h3>
              <p>{{ t(item.descKey) }}</p>
            </div>
          </li>
        </ol>
      </section>

      <section class="panel skills">
        <div class="panel__header">
          <h2>{{ t('skills.title') }}</h2>
        </div>
        <div class="skills-grid">
          <article class="skill-card" v-for="skill in skills" :key="skill.titleKey">
            <h3>{{ t(skill.titleKey) }}</h3>
            <ul>
              <li v-for="itemKey in skill.items" :key="itemKey">{{ t(itemKey) }}</li>
            </ul>
          </article>
        </div>
      </section>

      <section id="contact" class="panel contact-panel">
        <div class="panel__header">
          <h2>{{ t('split.contact.title') }}</h2>
          <p class="lead">{{ t('split.contact.body') }}</p>
        </div>
        <div class="contact-table__wrapper">
          <table class="contact-table">
            <caption>{{ t('contact.table.title') }}</caption>
            <tbody>
              <tr>
                <th scope="row">{{ t('contact.table.name') }}</th>
                <td>
                  <div class="inline-fields">
                    <label class="inline-field__label">
                      <span class="label-text">
                        {{ t('contact.table.firstName') }}<span class="required-star" aria-hidden="true">*</span>
                      </span>
                      <input
                        class="text-input"
                        type="text"
                        v-model="contactForm.firstName"
                        :aria-label="t('contact.table.firstName')"
                        required
                      />
                    </label>
                    <label class="inline-field__label">
                      <span class="label-text">
                        {{ t('contact.table.lastName') }}<span class="required-star" aria-hidden="true">*</span>
                      </span>
                      <input
                        class="text-input"
                        type="text"
                        v-model="contactForm.lastName"
                        :aria-label="t('contact.table.lastName')"
                        required
                      />
                    </label>
                  </div>
                </td>
              </tr>
              <tr>
                <th scope="row">{{ t('contact.table.email') }}</th>
                <td>
                  <label class="inline-field__label">
                    <span class="label-text">
                      {{ t('contact.table.email') }}<span class="required-star" aria-hidden="true">*</span>
                    </span>
                    <input
                      class="text-input"
                      type="email"
                      v-model="contactForm.email"
                      :aria-label="t('contact.table.email')"
                      required
                    />
                  </label>
                </td>
              </tr>
              <tr>
                <th scope="row">{{ t('contact.table.org') }}</th>
                <td>
                  <input
                    class="text-input"
                    v-model="contactForm.org"
                    :aria-label="t('contact.table.org')"
                  />
                </td>
              </tr>
              <tr>
                <th scope="row">{{ t('contact.table.message') }}</th>
                <td>
                  <textarea
                    class="text-input"
                    rows="3"
                    v-model="contactForm.message"
                    :aria-label="t('contact.table.message')"
                  ></textarea>
                </td>
              </tr>
            </tbody>
          </table>
          <div class="contact-table__actions">
            <button class="btn primary" type="button" @click="submitContactForm()">
              {{ t('contact.table.submit') }}
            </button>
            <p class="chat-note">{{ t('contact.table.helper') }}</p>
          </div>
        </div>
      </section>
    </main>

    <footer class="tk-footer">
      <p>{{ t('footer.copy') }}</p>
    </footer>
  </div>

  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
  <script type="module" src="./tiktok.js"></script>
</body>
</html>
